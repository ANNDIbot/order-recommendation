<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ä»Šå¤©åƒå•¥å®</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
    }
    .btn {
      background-color: white;
      border-radius: 1rem;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      text-align: center;
      padding: 0.75rem 1rem;
      font-size: 1.125rem;
      transition: all 0.2s;
    }
    .btn:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }
    .btn-random {
      background-color: #fed7aa;
      color: black;
      border-radius: 1rem;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      text-align: center;
      padding: 0.75rem 1rem;
      font-size: 1.125rem;
      transition: all 0.2s;
    }
    .btn-random:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }
    .section-card {
      background-color: white;
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      margin-bottom: 1.5rem;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-start py-6 px-4">
  <div id="app" class="w-full max-w-md space-y-6">

    <!-- é¡µé¢ 1ï¼šé€‰æ‹©å£å‘³ -->
    <div id="page1" class="space-y-6">
      <div class="section-card">
        <h2 class="text-center text-xl font-semibold mb-2">è¯·é€‰æ‹©å£å‘³</h2>
        <div class="border-t border-gray-200 mb-4"></div>
        <div class="grid grid-cols-2 gap-4">
          <button class="btn" onclick="selectFlavor('å’¸é²œ')">å’¸é²œ</button>
          <button class="btn" onclick="selectFlavor('é¦™è¾£')">é¦™è¾£</button>
          <button class="btn" onclick="selectFlavor('åç”œ')">åç”œ</button>
          <button class="btn" onclick="selectFlavor('æ¸…æ·¡')">æ¸…æ·¡</button>
          <button class="btn-random col-span-2" onclick="selectFlavorRandom()">ğŸ² éšæœº</button>
        </div>
      </div>
    </div>

    <!-- é¡µé¢ 2ï¼šé€‰æ‹©åœ°åŒº -->
    <div id="page2" class="space-y-6 hidden">
      <div class="section-card">
        <h2 class="text-center text-xl font-semibold mb-2">è¯·é€‰æ‹©èœç³»</h2>
        <div class="border-t border-gray-200 mb-4"></div>
        <div id="regionButtons" class="grid grid-cols-2 gap-4 max-h-[50vh] overflow-y-scroll pr-1"></div>
        <div class="text-center mt-4">
          <button class="btn" onclick="goBackToPage1()">â† è¿”å›ä¸Šä¸€æ­¥</button>
        </div>
      </div>
    </div>

    <!-- é¡µé¢ 3ï¼šæ¨èç»“æœ -->
    <div id="page3" class="space-y-6 hidden">
      <div class="section-card text-center">
        <h2 class="text-xl font-semibold mb-2">åƒå•¥å®ä¸ºä½ æ¨è</h2>
        <div class="border-t border-gray-200 mb-4"></div>
        <p class="text-2xl font-bold text-orange-600" id="resultText">åŠ è½½ä¸­...</p>
        <p class="text-sm text-gray-500 mt-2">âœ¨ å¸Œæœ›ä½ ä»Šå¤©åƒå¾—å¼€å¿ƒ âœ¨</p>
        <div class="text-center mt-6">
          <button class="btn" onclick="goBackToPage2()">â† å†æŒ‘ä¸€æ¬¡</button>
        </div>
      </div>
    </div>

  </div>

  <script>
    const flavorRegionMap = {
      "åç”œ": ["éŸ©å¼", "å¹¿å¼", "æ±Ÿæµ™"],
      "å’¸é²œ": ["åŒ—æ–¹", "äº‘è´µ", "æ¹˜å¼", "å®¶å¸¸", "æ±Ÿæµ™", "ç¦å»º", "å¹¿å¼", "ç¾å¼", "è¥¿åŒ—"],
      "æ¸…æ·¡": ["æ—¥å¼", "ç¾å¼", "åŒ—æ–¹", "å®¶å¸¸", "å·æ¸", "å¹¿å¼"],
      "é¦™è¾£": ["å·æ¸", "éŸ©å¼", "è¥¿åŒ—"]
    };

    const allRegions = Array.from(new Set(Object.values(flavorRegionMap).flat()));

    const data = [
      { name: "çŸ³é”…æ‹Œé¥­", flavor: "åç”œ", region: "éŸ©å¼" },
      { name: "é¿é£å¡˜", flavor: "åç”œ", region: "å¹¿å¼" },
      { name: "å¹¿å¼çƒ§å‘³é¥­", flavor: "åç”œ", region: "å¹¿å¼" },
      { name: "é†‰ç¾é‡Œ", flavor: "åç”œ", region: "æ±Ÿæµ™" },
      { name: "æµ¦é«˜è€ä¸Šæµ·æœ¬å¸®èœ", flavor: "åç”œ", region: "æ±Ÿæµ™" },
      { name: "ç‚’é¥¼ä¸", flavor: "å’¸é²œ", region: "åŒ—æ–¹" },
      { name: "è´µå·ç±³ç²‰", flavor: "å’¸é²œ", region: "äº‘è´µ" },
      { name: "å°æ»¡æ‰‹å·¥ç²‰", flavor: "å’¸é²œ", region: "æ¹˜å¼" },
      { name: "æ±¤é¢/æ‹Œé¢/ç‚’é¢", flavor: "å’¸é²œ", region: "å®¶å¸¸" },
      { name: "åˆºè‡‚/è¶…æ¨¡/è¶…çº§ç¢—", flavor: "å’¸é²œ", region: "å®¶å¸¸" },
      { name: "æ–°å‘ç°", flavor: "å’¸é²œ", region: "æ±Ÿæµ™" },
      { name: "è€å¨˜èˆ…", flavor: "å’¸é²œ", region: "æ±Ÿæµ™" },
      { name: "å¤–å©†å®¶", flavor: "å’¸é²œ", region: "å®¶å¸¸" },
      { name: "æ²™å¿å°åƒ", flavor: "å’¸é²œ", region: "ç¦å»º" },
      { name: "äº”é¦™å¤å‘³", flavor: "å’¸é²œ", region: "å¹¿å¼" },
      { name: "ç‚¸é¸¡é…å¥¶èŒ¶", flavor: "å’¸é²œ", region: "ç¾å¼" },
      { name: "æ–°ç–†ç‚’ç±³ç²‰", flavor: "å’¸é²œ", region: "è¥¿åŒ—" },
      { name: "ç¤¾åŒºé£Ÿå ‚oré¥­å ‚", flavor: "å’¸é²œ", region: "å®¶å¸¸" },
      { name: "è†ç”°é¤å…", flavor: "å’¸é²œ", region: "ç¦å»º" },
      { name: "å®¶åºœæ½®æ±•èœ", flavor: "å’¸é²œ", region: "å¹¿å¼" },
      { name: "éº¦å½“åŠ³", flavor: "å’¸é²œ", region: "ç¾å¼" },
      { name: "è¥¿è´", flavor: "å’¸é²œ", region: "è¥¿åŒ—" },
      { name: "å¯¿å¸æ‹¼ç›˜", flavor: "æ¸…æ·¡", region: "æ—¥å¼" },
      { name: "èµ›ç™¾å‘³", flavor: "æ¸…æ·¡", region: "ç¾å¼" },
      { name: "é¥ºå­/é¦„é¥¨", flavor: "æ¸…æ·¡", region: "åŒ—æ–¹" },
      { name: "å¯¿å–œçƒ§", flavor: "æ¸…æ·¡", region: "æ—¥å¼" },
      { name: "æ²™å¿", flavor: "æ¸…æ·¡", region: "å®¶å¸¸" },
      { name: "ç¿˜è„šç‰›è‚‰", flavor: "æ¸…æ·¡", region: "å·æ¸" },
      { name: "å·¦åº­å³é™¢", flavor: "æ¸…æ·¡", region: "å¹¿å¼" },
      { name: "éº»è¾£é¦™é”…", flavor: "é¦™è¾£", region: "å·æ¸" },
      { name: "éº»è¾£çƒ«", flavor: "é¦™è¾£", region: "å·æ¸" },
      { name: "å†’èœ", flavor: "é¦™è¾£", region: "å·æ¸" },
      { name: "éŸ©å¼æ±¤é¥­", flavor: "é¦™è¾£", region: "éŸ©å¼" },
      { name: "æ–°ç–†ç‚’ç±³ç²‰", flavor: "é¦™è¾£", region: "è¥¿åŒ—" }
    ]; // è¯·å°†ä½ çœŸå®çš„æ•°æ®æ•°ç»„ç²˜è´´åœ¨æ­¤å¤„

    let selectedFlavor = '';
    let selectedRegion = '';
    let isFlavorRandom = false;

    function selectFlavor(flavor) {
      selectedFlavor = flavor;
      isFlavorRandom = false;
      generateRegionButtons(false);
      document.getElementById('page1').classList.add('hidden');
      document.getElementById('page2').classList.remove('hidden');
    }

    function selectFlavorRandom() {
      const flavors = Object.keys(flavorRegionMap);
      selectedFlavor = randomPick(flavors);
      isFlavorRandom = true;
      generateRegionButtons(true);
      document.getElementById('page1').classList.add('hidden');
      document.getElementById('page2').classList.remove('hidden');
    }

    function generateRegionButtons(showAll = false) {
      const regionList = showAll ? allRegions : (flavorRegionMap[selectedFlavor] || []);
      const container = document.getElementById('regionButtons');
      container.innerHTML = '';

      regionList.forEach(region => {
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.innerText = region;
        btn.onclick = () => selectRegion(region);
        container.appendChild(btn);
      });

      const btnRandom = document.createElement('button');
      btnRandom.className = 'btn-random col-span-2';
      btnRandom.innerText = 'ğŸ² éšæœº';
      btnRandom.onclick = () => selectRegion('éšæœº');
      container.appendChild(btnRandom);
    }

    function selectRegion(region) {
      const regionList = flavorRegionMap[selectedFlavor] || allRegions;
      selectedRegion = region === 'éšæœº' ? randomPick(regionList) : region;
      document.getElementById('page2').classList.add('hidden');
      document.getElementById('page3').classList.remove('hidden');
      showResult();
    }

    function goBackToPage1() {
      document.getElementById('page2').classList.add('hidden');
      document.getElementById('page1').classList.remove('hidden');
    }

    function goBackToPage2() {
      document.getElementById('page3').classList.add('hidden');
      document.getElementById('page2').classList.remove('hidden');
    }

    function randomPick(list) {
      return list[Math.floor(Math.random() * list.length)];
    }

    function showResult() {
  const candidates = data.filter(d => d.flavor === selectedFlavor && d.region === selectedRegion);
  let pick, message;

  if (candidates.length > 0) {
    pick = randomPick(candidates).name;
    message = 'âœ¨ å¸Œæœ›ä½ ä»Šå¤©åƒå¾—å¼€å¿ƒ âœ¨';
  } else {
    pick = randomPick(data).name;
    message = 'ğŸ¤” æ²¡æœ‰åˆé€‚çš„æ¨èè¯¶...è¦ä¸ä»Šå¤©å…ˆè¯•è¯•è¿™ä¸ªï¼Ÿ';
  }

  document.getElementById('resultText').innerText = pick;
  document.querySelector('#page3 p.text-sm').innerText = message;
}
  </script>
</body>
</html>
